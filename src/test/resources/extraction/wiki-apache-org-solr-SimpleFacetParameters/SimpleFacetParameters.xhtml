<?xml version="1.0"?>
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="robots" content="index,nofollow" />

<title>SimpleFacetParameters - Solr Wiki</title>
<script type="text/javascript" src="/wiki/common/js/common.js" />

<script type="text/javascript">
&lt;!--
var search_hint = "Search";
//--&gt;
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/wiki/modernized/css/common.css" />
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="/wiki/modernized/css/screen.css" />
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="/wiki/modernized/css/print.css" />
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="/wiki/modernized/css/projection.css" />





<link rel="alternate" title="Solr Wiki: SimpleFacetParameters" href="/solr/SimpleFacetParameters?diffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=SimpleFacetParameters&amp;ddiffs=1" type="application/rss+xml" />


<link rel="Start" href="/solr/FrontPage" />
<link rel="Alternate" title="Wiki Markup" href="/solr/SimpleFacetParameters?action=raw" />
<link rel="Alternate" media="print" title="Print View" href="/solr/SimpleFacetParameters?action=print" />
<link rel="Search" href="/solr/FindPage" />
<link rel="Index" href="/solr/TitleIndex" />
<link rel="Glossary" href="/solr/WordIndex" />
<link rel="Help" href="/solr/HelpOnFormatting" />
</head>

<body lang="en" dir="ltr">

<div id="header">

<form id="searchform" method="get" action="/solr/SimpleFacetParameters">
<div>
<input type="hidden" name="action" value="fullsearch" />
<input type="hidden" name="context" value="180" />
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20" onfocus="searchFocus(this)" onblur="searchBlur(this)" onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search" />
<input id="titlesearch" name="titlesearch" type="submit" value="Titles" alt="Search Titles" />
<input id="fullsearch" name="fullsearch" type="submit" value="Text" alt="Search Full Text" />
</div>
</form>
<script type="text/javascript">
&lt;!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//--&gt;
</script>

<div id="logo"><a href="/solr/FrontPage">Solr Wiki</a></div>
<div id="username"><a href="/solr/SimpleFacetParameters?action=login" id="login" rel="nofollow">Login</a></div>
<h1 id="locationline">

<span id="pagelocation"><a href="/solr/SimpleFacetParameters">SimpleFacetParameters</a></span>
</h1>


<ul id="navibar">
<li class="wikilink"><a href="/solr/FrontPage">FrontPage</a></li><li class="wikilink"><a href="/solr/RecentChanges">RecentChanges</a></li><li class="wikilink"><a href="/solr/FindPage">FindPage</a></li><li class="wikilink"><a href="/solr/HelpContents">HelpContents</a></li><li class="current"><a href="/solr/SimpleFacetParameters">SimpleFacetParameters</a></li>
</ul>

<div id="pageline"><hr style="display:none;" /></div>

<ul class="editbar"><li><span class="disabled">Immutable Page</span></li><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onclick="toggleComments();return false;">Comments</a></li><li><a class="nbinfo" href="/solr/SimpleFacetParameters?action=info" rel="nofollow">Info</a></li><li><a class="nbattachments" href="/solr/SimpleFacetParameters?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="/solr/SimpleFacetParameters">
<div>
    <label>More Actions:</label>
    <select name="action" onchange="if ((this.selectedIndex != 0) &amp;&amp;&#x0A;                      (this.options[this.selectedIndex].disabled == false)) {&#x0A;                this.form.submit();&#x0A;            }&#x0A;            this.selectedIndex = 0;">
        <option value="raw">Raw Text</option>
<option value="print">Print View</option>
<option value="RenderAsDocbook">Render as Docbook</option>
<option value="refresh">Delete Cache</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="SpellCheck">Check Spelling</option>
<option value="LikePages">Like Pages</option>
<option value="LocalSiteMap">Local Site Map</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="RenamePage" disabled="" class="disabled">Rename Page</option>
<option value="CopyPage">Copy Page</option>
<option value="DeletePage" disabled="" class="disabled">Delete Page</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="MyPages">My Pages</option>
<option value="show" disabled="" class="disabled">Subscribe User</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="show" disabled="" class="disabled">Remove Spam</option>
<option value="show" disabled="" class="disabled">Revert to this revision</option>
<option value="PackagePages">Package Pages</option>
<option value="SyncPages">Sync Pages</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="Load">Load</option>
<option value="Save">Save</option>
<option value="SlideShow">SlideShow</option>
    </select>
    <input type="submit" value="Do" />
    
</div>
<script type="text/javascript">
&lt;!--// Init menu
actionsMenuInit('More Actions:');
//--&gt;
</script>
</form>
</li></ul>

</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top" />
<span class="anchor" id="line-1" /><p class="line862">Solr provides a <a class="http" href="http://lucene.apache.org/solr/api/org/apache/solr/request/SimpleFacets.html">Simple Faceting toolkit</a> which can be reused by various Request Handlers to include a "Facet counts" section within a search response. This extra section provides a breakdown or summary of the results based on some simple criteria, which can be used to help implement more advanced search interfaces. Use of faceting does not affect the results section of a search response. The <a href="/solr/SearchHandler">SearchHandler</a> uses these utilities via the <a class="nonexistent" href="/solr/FacetComponent">FacetComponent</a>, which supports the parameters listed here. <span class="anchor" id="line-2" /><span class="anchor" id="line-3" /></p><p class="line862">For More information on General Issues involved with Faceted searches in Solr, please read the <a href="/solr/SolrFacetingOverview">SolrFacetingOverview</a>. <span class="anchor" id="line-4" /><span class="anchor" id="line-5" /></p><p class="line867" /><div class="table-of-contents"><p class="table-of-contents-heading">Contents</p><ol><li>
<a href="#Parameters">Parameters</a><ol><li>
<a href="#facet">facet</a></li><li>
<a href="#facet.query_:_Arbitrary_Query_Faceting">facet.query : Arbitrary Query Faceting</a></li><li>
<a href="#Field_Value_Faceting_Parameters">Field Value Faceting Parameters</a><ol><li>
<a href="#facet.field">facet.field</a></li><li>
<a href="#facet.prefix">facet.prefix</a></li><li>
<a href="#facet.sort">facet.sort</a></li><li>
<a href="#facet.limit">facet.limit</a></li><li>
<a href="#facet.offset">facet.offset</a></li><li>
<a href="#facet.mincount">facet.mincount</a></li><li>
<a href="#facet.missing">facet.missing</a></li><li>
<a href="#facet.method">facet.method</a></li><li>
<a href="#facet.enum.cache.minDf">facet.enum.cache.minDf</a></li><li>
<a href="#facet.threads">facet.threads</a></li></ol></li><li>
<a href="#Date_Faceting_Parameters">Date Faceting Parameters</a><ol><li>
<a href="#facet.date">facet.date</a></li><li>
<a href="#facet.date.start">facet.date.start</a></li><li>
<a href="#facet.date.end">facet.date.end</a></li><li>
<a href="#facet.date.gap">facet.date.gap</a></li><li>
<a href="#facet.date.hardend">facet.date.hardend</a></li><li>
<a href="#facet.date.other">facet.date.other</a></li><li>
<a href="#facet.date.include">facet.date.include</a></li></ol></li><li>
<a href="#Facet_by_Range">Facet by Range</a><ol><li>
<a href="#facet.range">facet.range</a></li><li>
<a href="#facet.range.start">facet.range.start</a></li><li>
<a href="#facet.range.end">facet.range.end</a></li><li>
<a href="#facet.range.gap">facet.range.gap</a></li><li>
<a href="#facet.range.hardend">facet.range.hardend</a></li><li>
<a href="#facet.range.other">facet.range.other</a></li><li>
<a href="#facet.range.include">facet.range.include</a></li></ol></li><li>
<a href="#Multi-Select_Faceting_and_LocalParams">Multi-Select Faceting and LocalParams</a><ol><li>
<a href="#Tagging_and_excluding_Filters">Tagging and excluding Filters</a></li><li>
<a href="#key_:_Changing_the_output_key">key : Changing the output key</a></li></ol></li><li>
<a href="#Pivot_.28ie_Decision_Tree.29_Faceting">Pivot (ie Decision Tree) Faceting</a><ol><li>
<a href="#facet.pivot">facet.pivot</a></li><li>
<a href="#facet.pivot.mincount">facet.pivot.mincount</a></li></ol></li><li>
<a href="#Interval_Faceting">Interval Faceting</a><ol><li>
<a href="#facet.interval">facet.interval</a></li><li>
<a href="#facet.interval.set">facet.interval.set</a></li><li>
<a href="#Interval_Syntax">Interval Syntax</a></li><li>
<a href="#Changing_the_interval_Keys">Changing the interval Keys</a></li></ol></li></ol></li><li>
<a href="#Deprecated_Parameters">Deprecated Parameters</a><ol><li>
<a href="#facet.zeros">facet.zeros</a></li></ol></li><li>
<a href="#Examples">Examples</a><ol><li>
<a href="#Facet_Fields">Facet Fields</a></li><li>
<a href="#Facet_Fields_with_No_Zeros">Facet Fields with No Zeros</a></li><li>
<a href="#Facet_Fields_with_No_Zeros_And_Missing_Count_For_One_Field">Facet Fields with No Zeros And Missing Count For One Field</a></li><li>
<a href="#Facet_Field_with_Limit">Facet Field with Limit</a></li><li>
<a href="#Facet_Fields_and_Facet_Queries">Facet Fields and Facet Queries</a></li><li>
<a href="#Facet_prefix_.28term_suggest.29">Facet prefix (term suggest)</a></li><li>
<a href="#Date_Faceting:_per_day_for_the_past_5_days">Date Faceting: per day for the past 5 days</a></li><li>
<a href="#Retrieve_docs_with_facets_missing">Retrieve docs with facets missing</a></li><li>
<a href="#Pivot_.28ie_Decision_Tree.29_Faceting-1">Pivot (ie Decision Tree) Faceting</a></li><li>
<a href="#Interval_Faceting-1">Interval Faceting</a><ol><li>
<a href="#Changing_the_key_per_interval">Changing the key per interval</a></li></ol></li></ol></li><li>
<a href="#Warming">Warming</a></li></ol></div> <span class="anchor" id="line-6" /><span class="anchor" id="line-7" /><p class="line867">
</p><h1 id="Parameters">Parameters</h1>
<span class="anchor" id="line-8" /><p class="line874">These are the parameters used to drive the Simple Faceting behavior, grouped by the type of faceting they support. <span class="anchor" id="line-9" /><span class="anchor" id="line-10" /></p><p class="line874">Note that many parameters may be overridden on a per-field basis with the following syntax: <span class="anchor" id="line-11" /><span class="anchor" id="line-12" /></p><ul><li style="list-style-type:none"><p class="line891"><tt class="backtick">f.&lt;fieldName&gt;.&lt;FacetParam&gt;=&lt;value&gt;</tt> <span class="anchor" id="line-13" /><span class="anchor" id="line-14" /></p></li></ul><p class="line874">eg. <span class="anchor" id="line-15" /><span class="anchor" id="line-16" /></p><p class="line867"><span class="anchor" id="line-17" /><span class="anchor" id="line-18" /><span class="anchor" id="line-19" /></p><pre><span class="anchor" id="line-1" />  facet.limit=10
<span class="anchor" id="line-2" />  f.category.facet.limit=5</pre><span class="anchor" id="line-20" /><p class="line874">Indicating that 10 terms will be returned for all specified facet.fields, excepting category. Which if specified will return 5 terms. <span class="anchor" id="line-21" /><span class="anchor" id="line-22" /></p><p class="line867">
</p><h2 id="facet">facet</h2>
<span class="anchor" id="line-23" /><p class="line874">Set to "true" this param enables facet counts in the query response. Any blank or missing value, or "false" will disable faceting.  None of the other parameters listed below will have any effect without setting this param to "true" <span class="anchor" id="line-24" /><span class="anchor" id="line-25" /></p><p class="line874">The default value is blank. <span class="anchor" id="line-26" /><span class="anchor" id="line-27" /></p><p class="line867">
</p><h2 id="facet.query_:_Arbitrary_Query_Faceting">facet.query : Arbitrary Query Faceting</h2>
<span class="anchor" id="line-28" /><p class="line874">This param allows you to specify an arbitrary query in the Lucene default syntax to generate a facet count. By default, faceting returns a count of the unique terms for a "field", while facet.query allows you to determine counts for arbitrary terms or expressions. <span class="anchor" id="line-29" /><span class="anchor" id="line-30" /></p><p class="line862">This parameter can be specified multiple times to indicate that multiple queries should be used as separate facet constraints.  It can be particularly useful for numeric range based facets, or prefix based facets -- see example below (i.e. <tt>price:[* TO 500] and  price:[501 TO *]</tt>). <span class="anchor" id="line-31" /><span class="anchor" id="line-32" /></p><p class="line862">To specify facet queries not in the Lucene default query syntax, prefix the facet query with the name of the query notation, a la <a href="/solr/LocalParams">LocalParams</a>. For example, to use the hypothetical myfunc query parser, send parameter <tt>facet.query={!myfunc}name~fred</tt> <span class="anchor" id="line-33" /><span class="anchor" id="line-34" /></p><p class="line867">
</p><h2 id="Field_Value_Faceting_Parameters">Field Value Faceting Parameters</h2>
<span class="anchor" id="line-35" /><p class="line874">Several params can be used to trigger faceting based on the indexed Terms of a field. <span class="anchor" id="line-36" /><span class="anchor" id="line-37" /></p><p class="line862">When using this param, it is important to remember that "Term" is a very specific concept in Lucene -- it relates to the literal field/value pairs that are <em>Indexed</em> after any Analysis occurs.  For text fields that include stemming, or lowercasing, or word splitting you may not get what you expect.  If you want both Analysis (for searching) and Faceting on the full literal Strings, use copyField to create two versions of the field: one Text and one String.  Make sure both are <tt class="backtick">indexed="true"</tt> <span class="anchor" id="line-38" /><span class="anchor" id="line-39" /></p><p class="line867"><span class="anchor" id="facet.field" /> <span class="anchor" id="line-40" /><span class="anchor" id="line-41" /></p><p class="line867">
</p><h3 id="facet.field-1">facet.field</h3>
<span class="anchor" id="line-42" /><p class="line874">This param allows you to specify a field which should be treated as a facet.  It will iterate over each Term in the field and generate a facet count using that Term as the constraint. <span class="anchor" id="line-43" /><span class="anchor" id="line-44" /></p><p class="line874">This parameter can be specified multiple times to indicate multiple facet fields. <span class="anchor" id="line-45" /><span class="anchor" id="line-46" /></p><p class="line874">None of the other params in this section will have any effect without specifying at least one field name using this param. <span class="anchor" id="line-47" /><span class="anchor" id="line-48" /></p><p class="line867">
</p><h3 id="facet.prefix">facet.prefix</h3>
<span class="anchor" id="line-49" /><p class="line874">Limits the terms on which to facet to those starting with the given string prefix.  Note that unlike fq, this does not change the search results -- it merely reduces the facet values returned to those beginning with the specified prefix. <span class="anchor" id="line-50" /><span class="anchor" id="line-51" /></p><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-52" /><span class="anchor" id="line-53" /></p><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a href="/solr/Solr1.2">Solr1.2</a> <span class="anchor" id="line-54" /><span class="anchor" id="line-55" /></p><p class="line867">
</p><h3 id="facet.sort">facet.sort</h3>
<span class="anchor" id="line-56" /><p class="line874">This param determines the ordering of the facet field constraints. <span class="anchor" id="line-57" /><span class="anchor" id="line-58" /></p><ul><li><p class="line891"><tt>count</tt> - sort the constraints by count (highest count first) <span class="anchor" id="line-59" /></p></li><li><p class="line891"><tt>index</tt> - to return the constraints sorted in their index order (lexicographic by indexed term).  For terms in the ascii range, this will be alphabetically sorted. <span class="anchor" id="line-60" /><span class="anchor" id="line-61" /></p></li></ul><p class="line862">The default is <tt>count</tt> if facet.limit is greater than 0, <tt>index</tt> otherwise. <span class="anchor" id="line-62" /><span class="anchor" id="line-63" /></p><p class="line862">Prior to <a href="/solr/Solr1.4">Solr1.4</a>, one needed to use <tt>true</tt> instead of <tt>count</tt> and <tt>false</tt> instead of <tt>index</tt>. <span class="anchor" id="line-64" /><span class="anchor" id="line-65" /></p><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-66" /><span class="anchor" id="line-67" /></p><p class="line867">
</p><h3 id="facet.limit">facet.limit</h3>
<span class="anchor" id="line-68" /><p class="line874">This param indicates the maximum number of constraint counts that should be returned for the facet fields.   A negative value means unlimited. <span class="anchor" id="line-69" /><span class="anchor" id="line-70" /></p><p class="line874">The default value is 100. <span class="anchor" id="line-71" /><span class="anchor" id="line-72" /></p><p class="line874">This parameter can be specified on a per field basis to indicate a separate limit for certain fields. <span class="anchor" id="line-73" /><span class="anchor" id="line-74" /></p><p class="line867">
</p><h3 id="facet.offset">facet.offset</h3>
<span class="anchor" id="line-75" /><p class="line874">This param indicates an offset into the list of constraints to allow paging. <span class="anchor" id="line-76" /><span class="anchor" id="line-77" /></p><p class="line874">The default value is 0. <span class="anchor" id="line-78" /><span class="anchor" id="line-79" /></p><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-80" /><span class="anchor" id="line-81" /></p><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a href="/solr/Solr1.2">Solr1.2</a> <span class="anchor" id="line-82" /><span class="anchor" id="line-83" /></p><p class="line867">
</p><h3 id="facet.mincount">facet.mincount</h3>
<span class="anchor" id="line-84" /><p class="line874">This param indicates the minimum counts for facet fields should be included in the response. <span class="anchor" id="line-85" /><span class="anchor" id="line-86" /></p><p class="line874">The default value is 0. <span class="anchor" id="line-87" /><span class="anchor" id="line-88" /></p><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-89" /><span class="anchor" id="line-90" /></p><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a href="/solr/Solr1.2">Solr1.2</a> <span class="anchor" id="line-91" /><span class="anchor" id="line-92" /></p><p class="line867">
</p><h3 id="facet.missing">facet.missing</h3>
<span class="anchor" id="line-93" /><p class="line874">Set to "true" this param indicates that in addition to the Term based constraints of a facet field, a count of all matching results which have no value for the field should be computed <span class="anchor" id="line-94" /><span class="anchor" id="line-95" /></p><p class="line874">The default value is false. <span class="anchor" id="line-96" /><span class="anchor" id="line-97" /></p><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-98" /><span class="anchor" id="line-99" /></p><p class="line867"><span class="anchor" id="facet.method" /> <span class="anchor" id="line-100" /><span class="anchor" id="line-101" /></p><p class="line867">
</p><h3 id="facet.method-1">facet.method</h3>
<span class="anchor" id="line-102" /><p class="line874">This parameter indicates what type of algorithm/method to use when faceting a field. <span class="anchor" id="line-103" /><span class="anchor" id="line-104" /></p><ul><li><p class="line891"><tt>enum</tt> Enumerates all terms in a field, calculating the set intersection of documents that match the term with documents that match the query.  This was the default (and only) method for faceting multi-valued fields prior to Solr 1.4. <span class="anchor" id="line-105" /></p></li><li><p class="line891"><tt>fc</tt> (stands for Field Cache) The facet counts are calculated by iterating over documents that match the query and summing the terms that appear in each document.  This was the default method for single valued fields prior to Solr 1.4. <span class="anchor" id="line-106" /></p></li><li><p class="line891"><tt>fcs</tt> (stands for Field Cache per Segment) works the same as <tt>fc</tt> except the underlying cache data structure is built for each segment of the index individually <span class="anchor" id="line-107" /><span class="anchor" id="line-108" /></p></li></ul><p class="line862">The default value is <tt>fc</tt> (except for BoolField which uses <tt>enum</tt>) since it tends to use less memory and is faster then the enumeration method when a field has many unique terms in the index.   <span class="anchor" id="line-109" /><span class="anchor" id="line-110" /></p><p class="line862">For indexes that are changing rapidly in NRT situations, <tt>fcs</tt> may be a better choice because it reduces the overhead of building the cache structures on the first request and/or warming queries when opening a new searcher -- but tends to be somewhat slower then <tt>fc</tt> for subsequent requests against the same searcher. <span class="anchor" id="line-111" /><span class="anchor" id="line-112" /></p><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-113" /><span class="anchor" id="line-114" /></p><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a href="/solr/Solr1.4">Solr1.4</a> <span class="anchor" id="line-115" /><span class="anchor" id="line-116" /></p><p class="line867">
</p><h3 id="facet.enum.cache.minDf">facet.enum.cache.minDf</h3>
<span class="anchor" id="line-117" /><p class="line862">This param indicates the minimum document frequency (number of documents matching a term) for which the filterCache should be used when determining the constraint count for that term.  This is only used when <tt>facet.method=enum</tt> method of faceting <span class="anchor" id="line-118" /><span class="anchor" id="line-119" /></p><p class="line874">A value greater than zero will decrease memory usage of the filterCache, but increase the query time. When faceting on a field with a very large number of terms, and you wish to decrease memory usage, try a low value of 25 to 50 first. <span class="anchor" id="line-120" /><span class="anchor" id="line-121" /></p><p class="line874">The default value is 0, causing the filterCache to be used for all terms in the field. <span class="anchor" id="line-122" /><span class="anchor" id="line-123" /></p><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-124" /><span class="anchor" id="line-125" /></p><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a href="/solr/Solr1.2">Solr1.2</a> <span class="anchor" id="line-126" /><span class="anchor" id="line-127" /></p><p class="line867">
</p><h3 id="facet.threads">facet.threads</h3>
<span class="anchor" id="line-128" /><p class="line862">This param will cause loading the underlying fields used in faceting to be executed in parallel with the number of threads specified. Specify as <tt>facet.threads=#</tt> where # is the maximum number of threads used. Omitting this parameter or specifying the thread count as 0 will not spawn any threads just as before. Specifying a negative number of threads will spin up to Integer.MAX_VALUE threads. <span class="anchor" id="line-129" /><span class="anchor" id="line-130" /></p><p class="line874">Currently this is limited to the fields, range and query facets are not yet supported. <span class="anchor" id="line-131" /><span class="anchor" id="line-132" /></p><p class="line874">In at least one case this has reduced warmup times from 20 seconds to under 5 seconds. <span class="anchor" id="line-133" /><span class="anchor" id="line-134" /></p><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a href="/solr/Solr4.5">Solr4.5</a> <span class="anchor" id="line-135" /><span class="anchor" id="line-136" /></p><p class="line867">
</p><h2 id="Date_Faceting_Parameters">Date Faceting Parameters</h2>
<span class="anchor" id="line-137" /><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a href="/solr/Solr1.3">Solr1.3</a> Several params can be used to trigger faceting based on Date ranges computed using simple <a class="http" href="http://lucene.apache.org/solr/4_0_0/solr-core/org/apache/solr/util/DateMathParser.html">DateMathParser</a> expressions. <span class="anchor" id="line-138" /><span class="anchor" id="line-139" /></p><p class="line862">When using Date Faceting, the <tt>facet.date</tt>, <tt>facet.date.start</tt>, <tt>facet.date.end</tt>, and <tt>facet.date.gap</tt> params are all mandatory... <span class="anchor" id="line-140" /><span class="anchor" id="line-141" /></p><ul><li style="list-style-type:none"><p class="line891"><strong>NOTE:</strong> as of <a href="/solr/Solr3.1">Solr3.1</a> Date Faceting has been deprecated in favor of the more general <a href="/solr/SimpleFacetParameters#rangefaceting">Range Faceting described below</a>.  The response structure is slightly different, but the functionality is equivalent (except that it supports numeric fields as well as dates) <span class="anchor" id="line-142" /><span class="anchor" id="line-143" /></p></li></ul><p class="line867">
</p><h3 id="facet.date">facet.date</h3>
<span class="anchor" id="line-144" /><p class="line862">This param allows you to specify names of fields (of type <a class="nonexistent" href="/solr/DateField">DateField</a>) which should be treated as date facets. <span class="anchor" id="line-145" /><span class="anchor" id="line-146" /></p><p class="line874">This parameter can be specified multiple times to indicate multiple date facet fields. <span class="anchor" id="line-147" /><span class="anchor" id="line-148" /></p><p class="line867">
</p><h3 id="facet.date.start">facet.date.start</h3>
<span class="anchor" id="line-149" /><p class="line862">The lower bound for the first date range for all Date Faceting on this field.  This should be a single date expression which may use the <a class="http" href="http://lucene.apache.org/solr/4_0_0/solr-core/org/apache/solr/util/DateMathParser.html">DateMathParser</a> syntax. <span class="anchor" id="line-150" /><span class="anchor" id="line-151" /></p><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-152" /><span class="anchor" id="line-153" /></p><p class="line867">
</p><h3 id="facet.date.end">facet.date.end</h3>
<span class="anchor" id="line-154" /><p class="line862">The minimum upper bound for the last date range for all Date Faceting on this field (see <tt>facet.date.hardend</tt> for an explanation of what the actual end value may be greater).  This should be a single date expression which may use the <a class="http" href="http://lucene.apache.org/solr/4_0_0/solr-core/org/apache/solr/util/DateMathParser.html">DateMathParser</a> syntax. <span class="anchor" id="line-155" /><span class="anchor" id="line-156" /></p><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-157" /><span class="anchor" id="line-158" /></p><p class="line867">
</p><h3 id="facet.date.gap">facet.date.gap</h3>
<span class="anchor" id="line-159" /><p class="line862">The size of each date range expressed as an interval to be added to the lower bound using the <a class="http" href="http://lucene.apache.org/solr/4_0_0/solr-core/org/apache/solr/util/DateMathParser.html">DateMathParser</a> syntax. <span class="anchor" id="line-160" /><span class="anchor" id="line-161" /></p><p class="line862">Example: <tt>facet.date.gap=%2B1DAY</tt>  (+1DAY) <span class="anchor" id="line-162" /><span class="anchor" id="line-163" /></p><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-164" /><span class="anchor" id="line-165" /></p><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a href="/solr/Solr3.6">Solr3.6</a>, <a href="/solr/Solr4.0">Solr4.0</a> -- See <a class="https" href="https://issues.apache.org/jira/browse/SOLR-2366">https://issues.apache.org/jira/browse/SOLR-2366</a> The following section on variable width gaps discusses uncommitted code Gaps can also be variable width by passing in a comma separated list of the gap size to be used.  The last gap specified will be used to fill out all remaining gaps if the number of gaps given does not go evenly into the range.  Variable width gaps are useful, for example, in spatial applications where one might want to facet by distance into three buckets: walking (0-5KM), driving(5-100KM), other(100KM+). <span class="anchor" id="line-166" /><span class="anchor" id="line-167" /></p><p class="line862">Example: <tt>facet.date.gap=+1DAY,+2DAY,+3DAY,+10DAY</tt> -- This creates 4+ buckets of size, 1 day, 2 days, 3 days and then 0 or more of 10 days each, depending on the start and end times. <span class="anchor" id="line-168" /><span class="anchor" id="line-169" /></p><p class="line867">
</p><h3 id="facet.date.hardend">facet.date.hardend</h3>
<span class="anchor" id="line-170" /><p class="line862">A Boolean parameter instructing Solr what to do in the event that <tt>facet.date.gap</tt> does not divide evenly between <tt>facet.date.start</tt> and <tt>facet.date.end</tt>.  If this is true, the last date range constraint will have an upper bound of <tt>facet.date.end</tt>; if false, the last date range will have the smallest possible upper bound greater then <tt>facet.date.end</tt> such that the range is exactly <tt>facet.date.gap</tt> wide. <span class="anchor" id="line-171" /><span class="anchor" id="line-172" /></p><p class="line874">The default is false. <span class="anchor" id="line-173" /><span class="anchor" id="line-174" /></p><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-175" /><span class="anchor" id="line-176" /></p><p class="line867">
</p><h3 id="facet.date.other">facet.date.other</h3>
<span class="anchor" id="line-177" /><p class="line862">This param indicates that in addition to the counts for each date range constraint between <tt>facet.date.start</tt> and <tt>facet.date.end</tt>, counts should also be computed for... <span class="anchor" id="line-178" /><span class="anchor" id="line-179" /></p><ul><li><p class="line891"><tt>before</tt> all records with field values lower then lower bound of the first range <span class="anchor" id="line-180" /></p></li><li><p class="line891"><tt>after</tt> all records with field values greater then the upper bound of the last range <span class="anchor" id="line-181" /></p></li><li><p class="line891"><tt>between</tt> all records with field values between the start and end bounds of all ranges <span class="anchor" id="line-182" /></p></li><li><p class="line891"><tt>none</tt> compute none of this information <span class="anchor" id="line-183" /></p></li><li><p class="line891"><tt>all</tt> shortcut for <tt>before</tt>, <tt>between</tt>, and <tt>after</tt> <span class="anchor" id="line-184" /><span class="anchor" id="line-185" /></p></li></ul><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-186" /><span class="anchor" id="line-187" /></p><p class="line862">In addition to the <tt>all</tt> option, this parameter can be specified multiple times to indicate multiple choices -- but <tt>none</tt> will override all other options. <span class="anchor" id="line-188" /><span class="anchor" id="line-189" /></p><p class="line867">
</p><h3 id="facet.date.include">facet.date.include</h3>
<span class="anchor" id="line-190" /><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a href="/solr/Solr3.1">Solr3.1</a> <span class="anchor" id="line-191" /><span class="anchor" id="line-192" /></p><p class="line862">By default, the ranges used to compute date faceting between facet.date.start and facet.date.end are all inclusive of both endpoints, while the the "before" and "after" ranges are not inclusive.  This behavior can be modified by the <tt>facet.date.include</tt> param, which can be any combination of the following options... <span class="anchor" id="line-193" /><span class="anchor" id="line-194" /></p><ul><li><p class="line891"><tt>lower</tt> = all gap based ranges include their lower bound <span class="anchor" id="line-195" /></p></li><li><p class="line891"><tt>upper</tt> = all gap based ranges include their upper bound <span class="anchor" id="line-196" /></p></li><li><p class="line891"><tt>edge</tt> = the first and last gap ranges include their edge bounds (ie: lower for the first one, upper for the last one) even if the corresponding upper/lower option is not specified <span class="anchor" id="line-197" /></p></li><li><p class="line891"><tt>outer</tt> = the "before" and "after" ranges will be inclusive of their bounds, even if the first or last ranges already include those boundaries. <span class="anchor" id="line-198" /></p></li><li><p class="line891"><tt>all</tt> = shorthand for lower, upper, edge, outer <span class="anchor" id="line-199" /><span class="anchor" id="line-200" /></p></li></ul><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-201" /><span class="anchor" id="line-202" /></p><p class="line874">This parameter can be specified multiple times to indicate multiple choices. <span class="anchor" id="line-203" /><span class="anchor" id="line-204" /></p><p class="line867"><span class="anchor" id="rangefaceting" /> <span class="anchor" id="line-205" /><span class="anchor" id="line-206" /></p><p class="line867">
</p><h2 id="Facet_by_Range">Facet by Range</h2>
<span class="anchor" id="line-207" /><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a href="/solr/Solr3.1">Solr3.1</a> <span class="anchor" id="line-208" /><span class="anchor" id="line-209" /></p><p class="line874">As a generalization of the Date faceting described above, one can use the Range Faceting feature on any date field or any numeric field that supports range queries.  This is particularly useful for the cases in the past where one might stitch together a series of range queries (as facet by query) for things like prices, etc. <span class="anchor" id="line-210" /><span class="anchor" id="line-211" /></p><p class="line867">
</p><h3 id="facet.range">facet.range</h3>
<span class="anchor" id="line-212" /><p class="line874">This param indicates what field to create range facets for.  This param allows you to specify names of fields  which should be treated as range facets. <span class="anchor" id="line-213" /><span class="anchor" id="line-214" /></p><p class="line862">Example: <tt>facet.range=price&amp;facet.range=age</tt> <span class="anchor" id="line-215" /><span class="anchor" id="line-216" /></p><p class="line867">
</p><h3 id="facet.range.start">facet.range.start</h3>
<span class="anchor" id="line-217" /><p class="line874">The lower bound of the ranges. <span class="anchor" id="line-218" /><span class="anchor" id="line-219" /></p><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-220" /><span class="anchor" id="line-221" /></p><p class="line862">Example: <tt>f.price.facet.range.start=0.0&amp;f.age.facet.range.start=10</tt> <span class="anchor" id="line-222" /><span class="anchor" id="line-223" /></p><p class="line867">
</p><h3 id="facet.range.end">facet.range.end</h3>
<span class="anchor" id="line-224" /><p class="line874">The upper bound of the ranges. <span class="anchor" id="line-225" /><span class="anchor" id="line-226" /></p><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-227" /><span class="anchor" id="line-228" /></p><p class="line862">Example: <tt>f.price.facet.range.end=1000.0&amp;f.age.facet.range.start=99</tt> <span class="anchor" id="line-229" /><span class="anchor" id="line-230" /></p><p class="line867">
</p><h3 id="facet.range.gap">facet.range.gap</h3>
<span class="anchor" id="line-231" /><p class="line862">The size of each range expressed as a value to be added to the lower bound.  For date fields, this should be expressed using the <a class="http" href="http://lucene.apache.org/solr/4_0_0/solr-core/org/apache/solr/util/DateMathParser.html">DateMathParser</a> syntax.  (ie: <tt>facet.range.gap=%2B1DAY</tt>, decoded = "+1DAY", URL encoding uses a normal plus sign as a space, so passing a plus to Solr request URL Hex encoding as %2B ) <span class="anchor" id="line-232" /><span class="anchor" id="line-233" /></p><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-234" /><span class="anchor" id="line-235" /></p><p class="line862">Example: <tt>f.price.facet.range.gap=100&amp;f.age.facet.range.gap=10</tt> <span class="anchor" id="line-236" /><span class="anchor" id="line-237" /></p><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a href="/solr/Solr3.6">Solr3.6</a>, <a href="/solr/Solr4.0">Solr4.0</a> -- See <a class="https" href="https://issues.apache.org/jira/browse/SOLR-2366">https://issues.apache.org/jira/browse/SOLR-2366</a> The following section on variable width gaps discusses uncommitted code Gaps can also be variable width by passing in a comma separated list of the gap size to be used.  The last gap specified will be used to fill out all remaining gaps if the number of gaps given does not go evenly into the range.  Variable width gaps are useful, for example, in spatial applications where one might want to facet by distance into three buckets: walking (0-5KM), driving(5-100KM), other(100KM+). <span class="anchor" id="line-238" /><span class="anchor" id="line-239" /></p><p class="line862">Example: <tt>facet.date.gap=1,2,3,10</tt> -- This creates 4+ buckets of size, 1, 2, 3 and then 0 or more buckets of 10 days each, depending on the start and end values. <span class="anchor" id="line-240" /><span class="anchor" id="line-241" /></p><p class="line867">
</p><h3 id="facet.range.hardend">facet.range.hardend</h3>
<span class="anchor" id="line-242" /><p class="line862">A Boolean parameter instructing Solr what to do in the event that <tt>facet.range.gap</tt> does not divide evenly between <tt>facet.range.start</tt> and <tt>facet.range.end</tt>.  If this is true, the last range constraint will have an upper bound of <tt>facet.range.end</tt>; if false, the last range will have the smallest possible upper bound greater then <tt>facet.range.end</tt> such that the range is exactly <tt>facet.range.gap</tt> wide. <span class="anchor" id="line-243" /><span class="anchor" id="line-244" /></p><p class="line874">The default is false. <span class="anchor" id="line-245" /><span class="anchor" id="line-246" /></p><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-247" /><span class="anchor" id="line-248" /></p><p class="line867">
</p><h3 id="facet.range.other">facet.range.other</h3>
<span class="anchor" id="line-249" /><p class="line862">This param indicates that in addition to the counts for each range constraint between <tt>facet.range.start</tt> and <tt>facet.range.end</tt>, counts should also be computed for... <span class="anchor" id="line-250" /><span class="anchor" id="line-251" /></p><ul><li><p class="line891"><tt>before</tt> all records with field values lower then lower bound of the first range <span class="anchor" id="line-252" /></p></li><li><p class="line891"><tt>after</tt> all records with field values greater then the upper bound of the last range <span class="anchor" id="line-253" /></p></li><li><p class="line891"><tt>between</tt> all records with field values between the start and end bounds of all ranges <span class="anchor" id="line-254" /></p></li><li><p class="line891"><tt>none</tt> compute none of this information <span class="anchor" id="line-255" /></p></li><li><p class="line891"><tt>all</tt> shortcut for <tt>before</tt>, <tt>between</tt>, and <tt>after</tt> <span class="anchor" id="line-256" /><span class="anchor" id="line-257" /></p></li></ul><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-258" /><span class="anchor" id="line-259" /></p><p class="line862">In addition to the <tt>all</tt> option, this parameter can be specified multiple times to indicate multiple choices -- but <tt>none</tt> will override all other options. <span class="anchor" id="line-260" /><span class="anchor" id="line-261" /></p><p class="line867">
</p><h3 id="facet.range.include">facet.range.include</h3>
<span class="anchor" id="line-262" /><p class="line862">By default, the ranges used to compute range faceting between facet.range.start and facet.range.end are inclusive of their lower bounds and exclusive of the upper bounds. The "before" range is exclusive and the "after" range is inclusive. This default, equivalent to <tt>lower</tt> below, will <em>not</em> result in double counting at the boundaries. This behavior can be modified by the <tt>facet.range.include</tt> param, which can be any combination of the following options... <span class="anchor" id="line-263" /><span class="anchor" id="line-264" /></p><ul><li><p class="line891"><tt>lower</tt> = all gap based ranges include their lower bound <span class="anchor" id="line-265" /></p></li><li><p class="line891"><tt>upper</tt> = all gap based ranges include their upper bound <span class="anchor" id="line-266" /></p></li><li><p class="line891"><tt>edge</tt> = the first and last gap ranges include their edge bounds (ie: lower for the first one, upper for the last one) even if the corresponding upper/lower option is not specified <span class="anchor" id="line-267" /></p></li><li><p class="line891"><tt>outer</tt> = the "before" and "after" ranges will be inclusive of their bounds, even if the first or last ranges already include those boundaries. <span class="anchor" id="line-268" /></p></li><li><p class="line891"><tt>all</tt> = shorthand for lower, upper, edge, outer <span class="anchor" id="line-269" /><span class="anchor" id="line-270" /></p></li></ul><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-271" /><span class="anchor" id="line-272" /></p><p class="line874">This parameter can be specified multiple times to indicate multiple choices. <span class="anchor" id="line-273" /><span class="anchor" id="line-274" /></p><p class="line862">If you want to ensure you don't double-count, don't choose both lower &amp; upper, don't choose outer, and don't choose all. <span class="anchor" id="line-275" /><span class="anchor" id="line-276" /></p><p class="line867">
</p><h2 id="Multi-Select_Faceting_and_LocalParams">Multi-Select Faceting and LocalParams</h2>
<span class="anchor" id="line-277" /><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a href="/solr/Solr1.4">Solr1.4</a> The <a href="/solr/LocalParams">LocalParams</a> syntax provides a method of adding meta-data to other parameter values, much like XML attributes. <span class="anchor" id="line-278" /><span class="anchor" id="line-279" /></p><p class="line867">
</p><h3 id="Tagging_and_excluding_Filters">Tagging and excluding Filters</h3>
<span class="anchor" id="line-280" /><p class="line874">One can tag specific filters and exclude those filters when faceting.  This is generally needed when doing multi-select faceting. <span class="anchor" id="line-281" /><span class="anchor" id="line-282" /></p><p class="line874">Consider the following example query with faceting: <span class="anchor" id="line-283" /><span class="anchor" id="line-284" /></p><p class="line867"><span class="anchor" id="line-285" /><span class="anchor" id="line-286" /></p><pre><span class="anchor" id="line-1-1" />q=mainquery&amp;fq=status:public&amp;fq=doctype:pdf&amp;facet=on&amp;facet.field=doctype</pre><span class="anchor" id="line-287" /><p class="line862">Because everything is already constrained by the filter <tt>doctype:pdf</tt>, the <tt>facet.field=doctype</tt> facet command is currently redundant and will return 0 counts for everything except <tt>doctype:pdf</tt>. <span class="anchor" id="line-288" /><span class="anchor" id="line-289" /></p><p class="line862">To implement a multi-select facet for doctype, a GUI may want to still display the other doctype values and their associated counts, as if the <tt>doctype:pdf</tt> constraint had not yet been applied.  Example: <span class="anchor" id="line-290" /><span class="anchor" id="line-291" /></p><p class="line867"><span class="anchor" id="line-292" /><span class="anchor" id="line-293" /><span class="anchor" id="line-294" /><span class="anchor" id="line-295" /><span class="anchor" id="line-296" /><span class="anchor" id="line-297" /></p><pre><span class="anchor" id="line-1-2" />=== Document Type ===
<span class="anchor" id="line-2-1" />  [ ] Word (42)
<span class="anchor" id="line-3" />  [x] PDF  (96)
<span class="anchor" id="line-4" />  [ ] Excel(11)
<span class="anchor" id="line-5" />  [ ] HTML (63)</pre><span class="anchor" id="line-298" /><p class="line874">To return counts for doctype values that are currently not selected, tag filters that directly constrain doctype, and exclude those filters when faceting on doctype. <span class="anchor" id="line-299" /><span class="anchor" id="line-300" /></p><p class="line867"><span class="anchor" id="line-301" /><span class="anchor" id="line-302" /></p><pre><span class="anchor" id="line-1-3" />q=mainquery&amp;fq=status:public&amp;fq={!tag=dt}doctype:pdf&amp;facet=on&amp;facet.field={!ex=dt}doctype</pre><span class="anchor" id="line-303" /><p class="line862">Filter exclusion is supported for all types of facets. Both the <tt>tag</tt> and <tt>ex</tt> local params may specify multiple values by separating them with commas. <span class="anchor" id="line-304" /><span class="anchor" id="line-305" /></p><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a href="/solr/Solr3.1">Solr3.1</a> Starting with Solr 3.1, the primary relevance query (i.e. the one normally specified by the <strong>q</strong> parameter) may also be excluded. <span class="anchor" id="line-306" /><span class="anchor" id="line-307" /></p><p class="line867">
</p><h3 id="key_:_Changing_the_output_key">key : Changing the output key</h3>
<span class="anchor" id="line-308" /><p class="line862">To change the output key for a faceting command, specify a new name via the <tt>key</tt> local param. For example, <span class="anchor" id="line-309" /><span class="anchor" id="line-310" /></p><p class="line867"><span class="anchor" id="line-311" /><span class="anchor" id="line-312" /></p><pre><span class="anchor" id="line-1-4" />facet.field={!ex=dt key=mylabel}doctype</pre><span class="anchor" id="line-313" /><p class="line874">Will cause the results to be returned under the key "mylabel" rather than "doctype" in the response. This can be helpful when faceting on the same field multiple times with different exclusions. <span class="anchor" id="line-314" /><span class="anchor" id="line-315" /></p><p class="line867">
</p><h2 id="Pivot_.28ie_Decision_Tree.29_Faceting">Pivot (ie Decision Tree) Faceting</h2>
<span class="anchor" id="line-316" /><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a href="/solr/Solr4.0">Solr4.0</a> Pivot faceting allows you to facet within the results of the parent facet <span class="anchor" id="line-317" /><span class="anchor" id="line-318" /></p><p class="line867">
</p><h3 id="facet.pivot">facet.pivot</h3>
<span class="anchor" id="line-319" /><p class="line874">A list of fields to pivot.  Multiple values will create multiple sections in the response <span class="anchor" id="line-320" /><span class="anchor" id="line-321" /></p><p class="line867"><span class="anchor" id="line-322" /><span class="anchor" id="line-323" /></p><pre><span class="anchor" id="line-1-5" />&amp;facet.pivot=cat,popularity,inStock&amp;facet.pivot=popularity,cat</pre><span class="anchor" id="line-324" /><p class="line867">
</p><h3 id="facet.pivot.mincount">facet.pivot.mincount</h3>
<span class="anchor" id="line-325" /><p class="line874">The minimum number of documents that need to match for the result to show up in the results.  Default value is 1 <span class="anchor" id="line-326" /><span class="anchor" id="line-327" /></p><p class="line867">
</p><h2 id="Interval_Faceting">Interval Faceting</h2>
<span class="anchor" id="line-328" /><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a class="nonexistent" href="/solr/Solr4.10">Solr4.10</a> Another supported form of faceting is “Interval Faceting”. This sounds similar to “Range Faceting”, but the functionality is really closer to doing “Facet Queries” with range queries. Interval Faceting allows you to set variable intervals and count the number of documents that have values within those intervals in the specified field.  <span class="anchor" id="line-329" />Before <img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a class="nonexistent" href="/solr/Solr5.2">Solr5.2</a>, fields used for Interval Faceting had to have “docValues” enabled, but this is no longer a restriction. <a href="/solr/DocValues">DocValues</a> will be used if present, but fieldCache will be used otherwise.  <span class="anchor" id="line-330" /><span class="anchor" id="line-331" /></p><p class="line874">Even though the same functionality can be achieved by using facet query with range queries, the implementation of these two methods is very different and will provide different performance depending on the context. If you are concerned about the performance of your searches you should test with both options. Interval Faceting tends to be better with multiple intervals for the same fields, while facet query tend to be better in environments where cache is more effective (static indexes for example) <span class="anchor" id="line-332" /><span class="anchor" id="line-333" /></p><p class="line867">
</p><h3 id="facet.interval">facet.interval</h3>
<span class="anchor" id="line-334" /><p class="line874">This parameter Indicate the field where interval faceting must be applied. It can be used multiple times in the same request to indicate multiple fields. <span class="anchor" id="line-335" /><span class="anchor" id="line-336" /><span class="anchor" id="line-337" /></p><pre><span class="anchor" id="line-1-6" />&amp;facet.interval=price&amp;facet.interval=size</pre><span class="anchor" id="line-338" /><span class="anchor" id="line-339" /><p class="line867">
</p><h3 id="facet.interval.set">facet.interval.set</h3>
<span class="anchor" id="line-340" /><p class="line862">This parameter is used to set the intervals for the field. This parameter can be specified multiple times to indicate multiple intervals. This parameter is global, which means that it will be used for all fields indicated with facet.interval unless there is an override for a specific field. To override this parameter on a specific field you can use: f.&lt;fieldname&gt;.facet.interval.set <span class="anchor" id="line-341" /><span class="anchor" id="line-342" /><span class="anchor" id="line-343" /></p><pre><span class="anchor" id="line-1-7" />&amp;f.price.facet.interval.set=[0,10]&amp;f.price.facet.interval.set=(10,100]</pre><span class="anchor" id="line-344" /><span class="anchor" id="line-345" /><p class="line867">
</p><h3 id="Interval_Syntax">Interval Syntax</h3>
<span class="anchor" id="line-346" /><p class="line874">Intervals must begin with either '(' or '[', be followed by the start value, then a comma ',', the end value, and finally ')' or ']’.  <span class="anchor" id="line-347" /><span class="anchor" id="line-348" /></p><p class="line874">For example: <span class="anchor" id="line-349" /><span class="anchor" id="line-350" /></p><ul><li><p class="line862">(1,10) -&gt; will include values greater than 1 and lower than 10 <span class="anchor" id="line-351" /><span class="anchor" id="line-352" /></p></li><li class="gap"><p class="line862">[1,10) -&gt; will include values greater or equal to 1 and lower than 10 <span class="anchor" id="line-353" /><span class="anchor" id="line-354" /></p></li><li class="gap"><p class="line862">[1,10] -&gt; will include values greater or equal to 1 and lower or equal to 10 <span class="anchor" id="line-355" /><span class="anchor" id="line-356" /></p></li></ul><p class="line874">The initial and end values can't be empty, if the interval needs to be unbounded, the special character '*' can be used for both, start and end limit. When using '*', '(' and '[', and ')' and ']' will be treated equal. [*,*] will include all documents with a value in the field. The interval limits may be strings, there is no need to add quotes, all the text until the comma will be treated as the start limit, and the text after that will be the end limit, for example: [Buenos Aires, New York]. Keep in mind that a string-like comparison will be done to match documents in string intervals (case-sensitive). The comparator can't be changed. Commas, brackets and square brackets can be escaped by using '\' in front of them. Whitespaces before and after the values will be omitted. Start limit can't be grater than the end limit. Equal limits are allowed, this allows you to indicate the specific values that you want to count, like [A,A], [B,B] and [C,Z]. <span class="anchor" id="line-357" /><span class="anchor" id="line-358" /><span class="anchor" id="line-359" /></p><p class="line867">
</p><h3 id="Changing_the_interval_Keys">Changing the interval Keys</h3>
<span class="anchor" id="line-360" /><p class="line862">Similar than with facet queries, with Interval Faceting the keys of the intervals can be changed by using the “key” <a class="nonexistent" href="/solr/LocalParam">LocalParam</a>. <span class="anchor" id="line-361" /><span class="anchor" id="line-362" /><span class="anchor" id="line-363" /></p><pre><span class="anchor" id="line-1-8" />&amp;f.price.facet.interval.set={!key=foo}[0,10]&amp;f.price.facet.interval.set={!key=bar}[10,100]</pre><span class="anchor" id="line-364" /><span class="anchor" id="line-365" /><span class="anchor" id="line-366" /><span class="anchor" id="line-367" /><p class="line867">
</p><h1 id="Deprecated_Parameters">Deprecated Parameters</h1>
<span class="anchor" id="line-368" /><p class="line867">
</p><h2 id="facet.zeros">facet.zeros</h2>
<span class="anchor" id="line-369" /><p class="line874">Set to "true" this param indicates that constraint counts for facet fields should be included even if the count is "0", set to "false" or blank and the "0" counts will be suppressed to save on the amount of data returned in the response. <span class="anchor" id="line-370" /><span class="anchor" id="line-371" /></p><p class="line874">The default value is "true". <span class="anchor" id="line-372" /><span class="anchor" id="line-373" /></p><p class="line874">This parameter can be specified on a per field basis. <span class="anchor" id="line-374" /><span class="anchor" id="line-375" /></p><p class="line874">Use facet.mincount instead. <span class="anchor" id="line-376" /><span class="anchor" id="line-377" /></p><p class="line867">
</p><h1 id="Examples">Examples</h1>
<span class="anchor" id="line-378" /><p class="line867"><strong>Note:</strong> In many of these examples "rows" is set to 0 so that the main result set is empty, to better emphasize the facet data. <span class="anchor" id="line-379" /><span class="anchor" id="line-380" /></p><p class="line867">
</p><h2 id="Facet_Fields">Facet Fields</h2>
<span class="anchor" id="line-381" /><p class="line867"><tt class="backtick">http://localhost:8983/solr/select?q=ipod&amp;rows=0&amp;facet=true&amp;facet.limit=-1&amp;facet.field=cat&amp;facet.field=inStock</tt> <span class="anchor" id="line-382" /><span class="anchor" id="line-383" /></p><p class="line867"><span class="anchor" id="line-384" /><span class="anchor" id="line-385" /><span class="anchor" id="line-386" /><span class="anchor" id="line-387" /><span class="anchor" id="line-388" /><span class="anchor" id="line-389" /><span class="anchor" id="line-390" /><span class="anchor" id="line-391" /><span class="anchor" id="line-392" /><span class="anchor" id="line-393" /><span class="anchor" id="line-394" /><span class="anchor" id="line-395" /><span class="anchor" id="line-396" /><span class="anchor" id="line-397" /><span class="anchor" id="line-398" /><span class="anchor" id="line-399" /><span class="anchor" id="line-400" /><span class="anchor" id="line-401" /><span class="anchor" id="line-402" /><span class="anchor" id="line-403" /><span class="anchor" id="line-404" /><span class="anchor" id="line-405" /><span class="anchor" id="line-406" /><span class="anchor" id="line-407" /><span class="anchor" id="line-408" /><span class="anchor" id="line-409" /><span class="anchor" id="line-410" /><span class="anchor" id="line-411" /><span class="anchor" id="line-412" /><span class="anchor" id="line-413" /><span class="anchor" id="line-414" /><span class="anchor" id="line-415" /></p><pre><span class="anchor" id="line-1-9" />&lt;response&gt;
<span class="anchor" id="line-2-2" />&lt;responseHeader&gt;&lt;status&gt;0&lt;/status&gt;&lt;QTime&gt;2&lt;/QTime&gt;&lt;/responseHeader&gt;
<span class="anchor" id="line-3-1" />&lt;result numFound="4" start="0"/&gt;
<span class="anchor" id="line-4-1" />&lt;lst name="facet_counts"&gt;
<span class="anchor" id="line-5-1" /> &lt;lst name="facet_queries"/&gt;
<span class="anchor" id="line-6" /> &lt;lst name="facet_fields"&gt;
<span class="anchor" id="line-7" />  &lt;lst name="cat"&gt;
<span class="anchor" id="line-8" />        &lt;int name="search"&gt;0&lt;/int&gt;
<span class="anchor" id="line-9" />        &lt;int name="memory"&gt;0&lt;/int&gt;
<span class="anchor" id="line-10" />        &lt;int name="graphics"&gt;0&lt;/int&gt;
<span class="anchor" id="line-11" />        &lt;int name="card"&gt;0&lt;/int&gt;
<span class="anchor" id="line-12" />        &lt;int name="music"&gt;1&lt;/int&gt;
<span class="anchor" id="line-13" />        &lt;int name="software"&gt;0&lt;/int&gt;
<span class="anchor" id="line-14" />        &lt;int name="electronics"&gt;3&lt;/int&gt;
<span class="anchor" id="line-15" />        &lt;int name="copier"&gt;0&lt;/int&gt;
<span class="anchor" id="line-16" />        &lt;int name="multifunction"&gt;0&lt;/int&gt;
<span class="anchor" id="line-17" />        &lt;int name="camera"&gt;0&lt;/int&gt;
<span class="anchor" id="line-18" />        &lt;int name="connector"&gt;2&lt;/int&gt;
<span class="anchor" id="line-19" />        &lt;int name="hard"&gt;0&lt;/int&gt;
<span class="anchor" id="line-20" />        &lt;int name="scanner"&gt;0&lt;/int&gt;
<span class="anchor" id="line-21" />        &lt;int name="monitor"&gt;0&lt;/int&gt;
<span class="anchor" id="line-22" />        &lt;int name="drive"&gt;0&lt;/int&gt;
<span class="anchor" id="line-23" />        &lt;int name="printer"&gt;0&lt;/int&gt;
<span class="anchor" id="line-24" />  &lt;/lst&gt;
<span class="anchor" id="line-25" />  &lt;lst name="inStock"&gt;
<span class="anchor" id="line-26" />        &lt;int name="false"&gt;3&lt;/int&gt;
<span class="anchor" id="line-27" />        &lt;int name="true"&gt;1&lt;/int&gt;
<span class="anchor" id="line-28" />  &lt;/lst&gt;
<span class="anchor" id="line-29" /> &lt;/lst&gt;
<span class="anchor" id="line-30" />&lt;/lst&gt;
<span class="anchor" id="line-31" />&lt;/response&gt;</pre><span class="anchor" id="line-416" /><p class="line867">
</p><h2 id="Facet_Fields_with_No_Zeros">Facet Fields with No Zeros</h2>
<span class="anchor" id="line-417" /><p class="line867"><tt class="backtick">http://localhost:8983/solr/select?q=ipod&amp;rows=0&amp;facet=true&amp;facet.limit=-1&amp;facet.field=cat&amp;facet.mincount=1&amp;facet.field=inStock</tt> <span class="anchor" id="line-418" /><span class="anchor" id="line-419" /></p><p class="line867"><span class="anchor" id="line-420" /><span class="anchor" id="line-421" /><span class="anchor" id="line-422" /><span class="anchor" id="line-423" /><span class="anchor" id="line-424" /><span class="anchor" id="line-425" /><span class="anchor" id="line-426" /><span class="anchor" id="line-427" /><span class="anchor" id="line-428" /><span class="anchor" id="line-429" /><span class="anchor" id="line-430" /><span class="anchor" id="line-431" /><span class="anchor" id="line-432" /><span class="anchor" id="line-433" /><span class="anchor" id="line-434" /><span class="anchor" id="line-435" /><span class="anchor" id="line-436" /><span class="anchor" id="line-437" /><span class="anchor" id="line-438" /></p><pre><span class="anchor" id="line-1-10" />&lt;response&gt;
<span class="anchor" id="line-2-3" />&lt;responseHeader&gt;&lt;status&gt;0&lt;/status&gt;&lt;QTime&gt;3&lt;/QTime&gt;&lt;/responseHeader&gt;
<span class="anchor" id="line-3-2" />&lt;result numFound="4" start="0"/&gt;
<span class="anchor" id="line-4-2" />&lt;lst name="facet_counts"&gt;
<span class="anchor" id="line-5-2" /> &lt;lst name="facet_queries"/&gt;
<span class="anchor" id="line-6-1" /> &lt;lst name="facet_fields"&gt;
<span class="anchor" id="line-7-1" />  &lt;lst name="cat"&gt;
<span class="anchor" id="line-8-1" />        &lt;int name="music"&gt;1&lt;/int&gt;
<span class="anchor" id="line-9-1" />        &lt;int name="connector"&gt;2&lt;/int&gt;
<span class="anchor" id="line-10-1" />        &lt;int name="electronics"&gt;3&lt;/int&gt;
<span class="anchor" id="line-11-1" />  &lt;/lst&gt;
<span class="anchor" id="line-12-1" />  &lt;lst name="inStock"&gt;
<span class="anchor" id="line-13-1" />        &lt;int name="false"&gt;3&lt;/int&gt;
<span class="anchor" id="line-14-1" />        &lt;int name="true"&gt;1&lt;/int&gt;
<span class="anchor" id="line-15-1" />  &lt;/lst&gt;
<span class="anchor" id="line-16-1" /> &lt;/lst&gt;
<span class="anchor" id="line-17-1" />&lt;/lst&gt;
<span class="anchor" id="line-18-1" />&lt;/response&gt;</pre><span class="anchor" id="line-439" /><p class="line867">
</p><h2 id="Facet_Fields_with_No_Zeros_And_Missing_Count_For_One_Field">Facet Fields with No Zeros And Missing Count For One Field</h2>
<span class="anchor" id="line-440" /><p class="line867"><tt class="backtick">http://localhost:8983/solr/select?q=ipod&amp;rows=0&amp;facet=true&amp;facet.limit=-1&amp;facet.field=cat&amp;f.cat.facet.missing=true&amp;facet.mincount=1&amp;facet.field=inStock</tt> <span class="anchor" id="line-441" /><span class="anchor" id="line-442" /></p><p class="line867"><span class="anchor" id="line-443" /><span class="anchor" id="line-444" /><span class="anchor" id="line-445" /><span class="anchor" id="line-446" /><span class="anchor" id="line-447" /><span class="anchor" id="line-448" /><span class="anchor" id="line-449" /><span class="anchor" id="line-450" /><span class="anchor" id="line-451" /><span class="anchor" id="line-452" /><span class="anchor" id="line-453" /><span class="anchor" id="line-454" /><span class="anchor" id="line-455" /><span class="anchor" id="line-456" /><span class="anchor" id="line-457" /><span class="anchor" id="line-458" /><span class="anchor" id="line-459" /><span class="anchor" id="line-460" /><span class="anchor" id="line-461" /><span class="anchor" id="line-462" /></p><pre><span class="anchor" id="line-1-11" />&lt;response&gt;
<span class="anchor" id="line-2-4" />&lt;responseHeader&gt;&lt;status&gt;0&lt;/status&gt;&lt;QTime&gt;3&lt;/QTime&gt;&lt;/responseHeader&gt;
<span class="anchor" id="line-3-3" />&lt;result numFound="4" start="0"/&gt;
<span class="anchor" id="line-4-3" />&lt;lst name="facet_counts"&gt;
<span class="anchor" id="line-5-3" /> &lt;lst name="facet_queries"/&gt;
<span class="anchor" id="line-6-2" /> &lt;lst name="facet_fields"&gt;
<span class="anchor" id="line-7-2" />  &lt;lst name="cat"&gt;
<span class="anchor" id="line-8-2" />        &lt;int name="music"&gt;1&lt;/int&gt;
<span class="anchor" id="line-9-2" />        &lt;int name="connector"&gt;2&lt;/int&gt;
<span class="anchor" id="line-10-2" />        &lt;int name="electronics"&gt;3&lt;/int&gt;
<span class="anchor" id="line-11-2" />        &lt;int&gt;1&lt;/int&gt;
<span class="anchor" id="line-12-2" />  &lt;/lst&gt;
<span class="anchor" id="line-13-2" />  &lt;lst name="inStock"&gt;
<span class="anchor" id="line-14-2" />        &lt;int name="false"&gt;3&lt;/int&gt;
<span class="anchor" id="line-15-2" />        &lt;int name="true"&gt;1&lt;/int&gt;
<span class="anchor" id="line-16-2" />  &lt;/lst&gt;
<span class="anchor" id="line-17-2" /> &lt;/lst&gt;
<span class="anchor" id="line-18-2" />&lt;/lst&gt;
<span class="anchor" id="line-19-1" />&lt;/response&gt;</pre><span class="anchor" id="line-463" /><p class="line867">
</p><h2 id="Facet_Field_with_Limit">Facet Field with Limit</h2>
<span class="anchor" id="line-464" /><p class="line867"><tt class="backtick">http://localhost:8983/solr/select?rows=0&amp;q=inStock:true&amp;facet=true&amp;facet.field=cat&amp;facet.limit=5</tt> <span class="anchor" id="line-465" /><span class="anchor" id="line-466" /></p><p class="line867"><span class="anchor" id="line-467" /><span class="anchor" id="line-468" /><span class="anchor" id="line-469" /><span class="anchor" id="line-470" /><span class="anchor" id="line-471" /><span class="anchor" id="line-472" /><span class="anchor" id="line-473" /><span class="anchor" id="line-474" /><span class="anchor" id="line-475" /><span class="anchor" id="line-476" /><span class="anchor" id="line-477" /><span class="anchor" id="line-478" /><span class="anchor" id="line-479" /><span class="anchor" id="line-480" /><span class="anchor" id="line-481" /><span class="anchor" id="line-482" /><span class="anchor" id="line-483" /></p><pre><span class="anchor" id="line-1-12" />&lt;response&gt;
<span class="anchor" id="line-2-5" />&lt;responseHeader&gt;&lt;status&gt;0&lt;/status&gt;&lt;QTime&gt;4&lt;/QTime&gt;&lt;/responseHeader&gt;
<span class="anchor" id="line-3-4" />&lt;result numFound="12" start="0"/&gt;
<span class="anchor" id="line-4-4" />&lt;lst name="facet_counts"&gt;
<span class="anchor" id="line-5-4" /> &lt;lst name="facet_queries"/&gt;
<span class="anchor" id="line-6-3" /> &lt;lst name="facet_fields"&gt;
<span class="anchor" id="line-7-3" />  &lt;lst name="cat"&gt;
<span class="anchor" id="line-8-3" />        &lt;int name="electronics"&gt;10&lt;/int&gt;
<span class="anchor" id="line-9-3" />        &lt;int name="memory"&gt;3&lt;/int&gt;
<span class="anchor" id="line-10-3" />        &lt;int name="drive"&gt;2&lt;/int&gt;
<span class="anchor" id="line-11-3" />        &lt;int name="hard"&gt;2&lt;/int&gt;
<span class="anchor" id="line-12-3" />        &lt;int name="monitor"&gt;2&lt;/int&gt;
<span class="anchor" id="line-13-3" />  &lt;/lst&gt;
<span class="anchor" id="line-14-3" /> &lt;/lst&gt;
<span class="anchor" id="line-15-3" />&lt;/lst&gt;
<span class="anchor" id="line-16-3" />&lt;/response&gt;</pre><span class="anchor" id="line-484" /><p class="line867">
</p><h2 id="Facet_Fields_and_Facet_Queries">Facet Fields and Facet Queries</h2>
<span class="anchor" id="line-485" /><p class="line867"><tt class="backtick">http://localhost:8983/solr/select?q=video&amp;rows=0&amp;facet=true&amp;facet.field=inStock&amp;facet.query=price:[*+TO+500]&amp;facet.query=price:[500+TO+*]</tt> <span class="anchor" id="line-486" /><span class="anchor" id="line-487" /></p><p class="line867"><span class="anchor" id="line-488" /><span class="anchor" id="line-489" /><span class="anchor" id="line-490" /><span class="anchor" id="line-491" /><span class="anchor" id="line-492" /><span class="anchor" id="line-493" /><span class="anchor" id="line-494" /><span class="anchor" id="line-495" /><span class="anchor" id="line-496" /><span class="anchor" id="line-497" /><span class="anchor" id="line-498" /><span class="anchor" id="line-499" /><span class="anchor" id="line-500" /><span class="anchor" id="line-501" /><span class="anchor" id="line-502" /><span class="anchor" id="line-503" /><span class="anchor" id="line-504" /></p><pre><span class="anchor" id="line-1-13" />&lt;response&gt;
<span class="anchor" id="line-2-6" />&lt;responseHeader&gt;&lt;status&gt;0&lt;/status&gt;&lt;QTime&gt;11&lt;/QTime&gt;&lt;/responseHeader&gt;
<span class="anchor" id="line-3-5" />&lt;result numFound="3" start="0"/&gt;
<span class="anchor" id="line-4-5" />&lt;lst name="facet_counts"&gt;
<span class="anchor" id="line-5-5" /> &lt;lst name="facet_queries"&gt;
<span class="anchor" id="line-6-4" />  &lt;int name="price:[* TO 500]"&gt;2&lt;/int&gt;
<span class="anchor" id="line-7-4" />  &lt;int name="price:[500 TO *]"&gt;1&lt;/int&gt;
<span class="anchor" id="line-8-4" /> &lt;/lst&gt;
<span class="anchor" id="line-9-4" /> &lt;lst name="facet_fields"&gt;
<span class="anchor" id="line-10-4" />  &lt;lst name="inStock"&gt;
<span class="anchor" id="line-11-4" />        &lt;int name="false"&gt;2&lt;/int&gt;
<span class="anchor" id="line-12-4" />        &lt;int name="true"&gt;1&lt;/int&gt;
<span class="anchor" id="line-13-4" />  &lt;/lst&gt;
<span class="anchor" id="line-14-4" /> &lt;/lst&gt;
<span class="anchor" id="line-15-4" />&lt;/lst&gt;
<span class="anchor" id="line-16-4" />&lt;/response&gt;</pre><span class="anchor" id="line-505" /><p class="line867">
</p><h2 id="Facet_prefix_.28term_suggest.29">Facet prefix (term suggest)</h2>
<span class="anchor" id="line-506" /><p class="line867"><tt class="backtick">http://localhost:8983/solr/select?q=hatcher&amp;wt=ruby&amp;indent=on&amp;facet=on&amp;rows=0&amp;facet.field=text&amp;facet.prefix=xx&amp;facet.limit=5&amp;facet.mincount=1</tt> <span class="anchor" id="line-507" /><span class="anchor" id="line-508" /></p><p class="line867"><span class="anchor" id="line-509" /><span class="anchor" id="line-510" /><span class="anchor" id="line-511" /><span class="anchor" id="line-512" /><span class="anchor" id="line-513" /><span class="anchor" id="line-514" /><span class="anchor" id="line-515" /><span class="anchor" id="line-516" /><span class="anchor" id="line-517" /><span class="anchor" id="line-518" /><span class="anchor" id="line-519" /><span class="anchor" id="line-520" /><span class="anchor" id="line-521" /><span class="anchor" id="line-522" /><span class="anchor" id="line-523" /><span class="anchor" id="line-524" /><span class="anchor" id="line-525" /><span class="anchor" id="line-526" /><span class="anchor" id="line-527" /><span class="anchor" id="line-528" /><span class="anchor" id="line-529" /><span class="anchor" id="line-530" /><span class="anchor" id="line-531" /><span class="anchor" id="line-532" /><span class="anchor" id="line-533" /></p><pre><span class="anchor" id="line-1-14" />{
<span class="anchor" id="line-2-7" />'responseHeader'=&gt;{
<span class="anchor" id="line-3-6" />  'status'=&gt;0,
<span class="anchor" id="line-4-6" />  'QTime'=&gt;88,
<span class="anchor" id="line-5-6" />  'params'=&gt;{
<span class="anchor" id="line-6-5" />        'facet.limit'=&gt;'5',
<span class="anchor" id="line-7-5" />        'wt'=&gt;'ruby',
<span class="anchor" id="line-8-5" />        'rows'=&gt;'0',
<span class="anchor" id="line-9-5" />        'facet'=&gt;'on',
<span class="anchor" id="line-10-5" />        'facet.mincount'=&gt;'1',
<span class="anchor" id="line-11-5" />        'facet.field'=&gt;'text',
<span class="anchor" id="line-12-5" />        'indent'=&gt;'on',
<span class="anchor" id="line-13-5" />        'facet.prefix'=&gt;'xx',
<span class="anchor" id="line-14-5" />        'q'=&gt;'hatcher'}},
<span class="anchor" id="line-15-5" />'response'=&gt;{'numFound'=&gt;90,'start'=&gt;0,'docs'=&gt;[]
<span class="anchor" id="line-16-5" />},
<span class="anchor" id="line-17-3" />'facet_counts'=&gt;{
<span class="anchor" id="line-18-3" />  'facet_queries'=&gt;{},
<span class="anchor" id="line-19-2" />  'facet_fields'=&gt;{
<span class="anchor" id="line-20-1" />        'text'=&gt;[
<span class="anchor" id="line-21-1" />         'xx',7,
<span class="anchor" id="line-22-1" />         'xxxviii',2,
<span class="anchor" id="line-23-1" />         'xx909337',1,
<span class="anchor" id="line-24-1" />         'xxvi',1] } } }</pre><span class="anchor" id="line-534" /><p class="line867">
</p><h2 id="Date_Faceting:_per_day_for_the_past_5_days">Date Faceting: per day for the past 5 days</h2>
<span class="anchor" id="line-535" /><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a href="/solr/Solr1.3">Solr1.3</a> <span class="anchor" id="line-536" /><span class="anchor" id="line-537" /></p><p class="line867"><tt class="backtick">http://localhost:8983/solr/select/?q=*:*&amp;rows=0&amp;facet=true&amp;facet.date=timestamp&amp;facet.date.start=NOW/DAY-5DAYS&amp;facet.date.end=NOW/DAY%2B1DAY&amp;facet.date.gap=%2B1DAY</tt> <span class="anchor" id="line-538" /><span class="anchor" id="line-539" /></p><p class="line867"><span class="anchor" id="line-540" /><span class="anchor" id="line-541" /><span class="anchor" id="line-542" /><span class="anchor" id="line-543" /><span class="anchor" id="line-544" /><span class="anchor" id="line-545" /><span class="anchor" id="line-546" /><span class="anchor" id="line-547" /><span class="anchor" id="line-548" /><span class="anchor" id="line-549" /><span class="anchor" id="line-550" /><span class="anchor" id="line-551" /><span class="anchor" id="line-552" /><span class="anchor" id="line-553" /><span class="anchor" id="line-554" /><span class="anchor" id="line-555" /><span class="anchor" id="line-556" /><span class="anchor" id="line-557" /><span class="anchor" id="line-558" /><span class="anchor" id="line-559" /><span class="anchor" id="line-560" /><span class="anchor" id="line-561" /><span class="anchor" id="line-562" /><span class="anchor" id="line-563" /><span class="anchor" id="line-564" /><span class="anchor" id="line-565" /><span class="anchor" id="line-566" /><span class="anchor" id="line-567" /><span class="anchor" id="line-568" /><span class="anchor" id="line-569" /><span class="anchor" id="line-570" /><span class="anchor" id="line-571" /><span class="anchor" id="line-572" /><span class="anchor" id="line-573" /></p><pre><span class="anchor" id="line-1-15" />&lt;response&gt;
<span class="anchor" id="line-2-8" />&lt;lst name="responseHeader"&gt;
<span class="anchor" id="line-3-7" /> &lt;int name="status"&gt;0&lt;/int&gt;
<span class="anchor" id="line-4-7" /> &lt;int name="QTime"&gt;5&lt;/int&gt;
<span class="anchor" id="line-5-7" /> &lt;lst name="params"&gt;
<span class="anchor" id="line-6-6" />  &lt;str name="facet.date"&gt;timestamp&lt;/str&gt;
<span class="anchor" id="line-7-6" />  &lt;str name="facet.date.end"&gt;NOW/DAY+1DAY&lt;/str&gt;
<span class="anchor" id="line-8-6" />  &lt;str name="facet.date.gap"&gt;+1DAY&lt;/str&gt;
<span class="anchor" id="line-9-6" />  &lt;str name="rows"&gt;0&lt;/str&gt;
<span class="anchor" id="line-10-6" />  &lt;str name="facet"&gt;true&lt;/str&gt;
<span class="anchor" id="line-11-6" />  &lt;str name="facet.date.start"&gt;NOW/DAY-5DAYS&lt;/str&gt;
<span class="anchor" id="line-12-6" />  &lt;str name="indent"&gt;true&lt;/str&gt;
<span class="anchor" id="line-13-6" />  &lt;str name="q"&gt;*:*&lt;/str&gt;
<span class="anchor" id="line-14-6" /> &lt;/lst&gt;
<span class="anchor" id="line-15-6" />&lt;/lst&gt;
<span class="anchor" id="line-16-6" />&lt;result name="response" numFound="42" start="0"/&gt;
<span class="anchor" id="line-17-4" />&lt;lst name="facet_counts"&gt;
<span class="anchor" id="line-18-4" /> &lt;lst name="facet_queries"/&gt;
<span class="anchor" id="line-19-3" /> &lt;lst name="facet_fields"/&gt;
<span class="anchor" id="line-20-2" /> &lt;lst name="facet_dates"&gt;
<span class="anchor" id="line-21-2" />  &lt;lst name="timestamp"&gt;
<span class="anchor" id="line-22-2" />        &lt;int name="2007-08-11T00:00:00.000Z"&gt;1&lt;/int&gt;
<span class="anchor" id="line-23-2" />        &lt;int name="2007-08-12T00:00:00.000Z"&gt;5&lt;/int&gt;
<span class="anchor" id="line-24-2" />        &lt;int name="2007-08-13T00:00:00.000Z"&gt;3&lt;/int&gt;
<span class="anchor" id="line-25-1" />        &lt;int name="2007-08-14T00:00:00.000Z"&gt;7&lt;/int&gt;
<span class="anchor" id="line-26-1" />        &lt;int name="2007-08-15T00:00:00.000Z"&gt;2&lt;/int&gt;
<span class="anchor" id="line-27-1" />        &lt;int name="2007-08-16T00:00:00.000Z"&gt;16&lt;/int&gt;
<span class="anchor" id="line-28-1" />        &lt;str name="gap"&gt;+1DAY&lt;/str&gt;
<span class="anchor" id="line-29-1" />        &lt;date name="end"&gt;2007-08-17T00:00:00Z&lt;/date&gt;
<span class="anchor" id="line-30-1" />  &lt;/lst&gt;
<span class="anchor" id="line-31-1" /> &lt;/lst&gt;
<span class="anchor" id="line-32" />&lt;/lst&gt;
<span class="anchor" id="line-33" />&lt;/response&gt;</pre><span class="anchor" id="line-574" /><p class="line867">
</p><h2 id="Retrieve_docs_with_facets_missing">Retrieve docs with facets missing</h2>
<span class="anchor" id="line-575" /><p class="line862">All the docs counted by facet.missing can be retrieved using a query filter: <tt class="backtick">fq=-facetField:[* TO *]</tt> <span class="anchor" id="line-576" /><span class="anchor" id="line-577" /></p><p class="line867">
</p><h2 id="Pivot_.28ie_Decision_Tree.29_Faceting-1">Pivot (ie Decision Tree) Faceting</h2>
<span class="anchor" id="line-578" /><p class="line867"><img alt="&lt;!&gt;" height="16" src="/wiki/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <a href="/solr/Solr4.0">Solr4.0</a> <span class="anchor" id="line-579" /><span class="anchor" id="line-580" /></p><p class="line867"><tt class="backtick">http://localhost:8983/solr/select?q=*:*&amp;facet.pivot=cat,popularity,inStock&amp;facet.pivot=popularity,cat&amp;facet=true&amp;facet.field=cat&amp;facet.limit=5&amp;rows=0&amp;wt=json&amp;indent=true&amp;facet.pivot.mincount=0</tt> <span class="anchor" id="line-581" /><span class="anchor" id="line-582" /></p><p class="line867"><span class="anchor" id="line-583" /><span class="anchor" id="line-584" /><span class="anchor" id="line-585" /><span class="anchor" id="line-586" /><span class="anchor" id="line-587" /><span class="anchor" id="line-588" /><span class="anchor" id="line-589" /><span class="anchor" id="line-590" /><span class="anchor" id="line-591" /><span class="anchor" id="line-592" /><span class="anchor" id="line-593" /><span class="anchor" id="line-594" /><span class="anchor" id="line-595" /><span class="anchor" id="line-596" /><span class="anchor" id="line-597" /><span class="anchor" id="line-598" /><span class="anchor" id="line-599" /><span class="anchor" id="line-600" /><span class="anchor" id="line-601" /><span class="anchor" id="line-602" /><span class="anchor" id="line-603" /><span class="anchor" id="line-604" /><span class="anchor" id="line-605" /><span class="anchor" id="line-606" /><span class="anchor" id="line-607" /><span class="anchor" id="line-608" /><span class="anchor" id="line-609" /><span class="anchor" id="line-610" /></p><pre><span class="anchor" id="line-1-16" />"facet_pivot":{
<span class="anchor" id="line-2-9" />      "cat,popularity,inStock":[{
<span class="anchor" id="line-3-8" />          "field":"cat",
<span class="anchor" id="line-4-8" />          "value":"electronics",
<span class="anchor" id="line-5-8" />          "count":14,
<span class="anchor" id="line-6-7" />          "pivot":[{
<span class="anchor" id="line-7-7" />              "field":"popularity",
<span class="anchor" id="line-8-7" />              "value":"6",
<span class="anchor" id="line-9-7" />              "count":5,
<span class="anchor" id="line-10-7" />              "pivot":[{
<span class="anchor" id="line-11-7" />                  "field":"inStock",
<span class="anchor" id="line-12-7" />                  "value":"true",
<span class="anchor" id="line-13-7" />                  "count":5}]},
<span class="anchor" id="line-14-7" />            {
<span class="anchor" id="line-15-7" />              "field":"popularity",
<span class="anchor" id="line-16-7" />              "value":"7",
<span class="anchor" id="line-17-5" />              "count":4,
<span class="anchor" id="line-18-5" />              "pivot":[{
<span class="anchor" id="line-19-4" />                  "field":"inStock",
<span class="anchor" id="line-20-3" />                  "value":"false",
<span class="anchor" id="line-21-3" />                  "count":2},
<span class="anchor" id="line-22-3" />                {
<span class="anchor" id="line-23-3" />                  "field":"inStock",
<span class="anchor" id="line-24-3" />                  "value":"true",
<span class="anchor" id="line-25-2" />                  "count":2}]},
<span class="anchor" id="line-26-2" />            {
<span class="anchor" id="line-27-2" />...</pre><span class="anchor" id="line-611" /><span class="anchor" id="line-612" /><span class="anchor" id="line-613" /><p class="line867">
</p><h2 id="Interval_Faceting-1">Interval Faceting</h2>
<span class="anchor" id="line-614" /><p class="line874">NOTE: make sure docValues="true" on the "price" field of your example schema before running this query <span class="anchor" id="line-615" /><tt class="backtick">http://localhost:8983/solr/select?q=*:*&amp;facet=true&amp;facet.interval=price&amp;f.price.facet.interval.set=[0,10]&amp;f.price.facet.interval.set=%2810,100]&amp;f.price.facet.interval.set=%28100,*]</tt> <span class="anchor" id="line-616" /><span class="anchor" id="line-617" /><span class="anchor" id="line-618" /><span class="anchor" id="line-619" /><span class="anchor" id="line-620" /><span class="anchor" id="line-621" /><span class="anchor" id="line-622" /><span class="anchor" id="line-623" /><span class="anchor" id="line-624" /><span class="anchor" id="line-625" /><span class="anchor" id="line-626" /><span class="anchor" id="line-627" /><span class="anchor" id="line-628" /><span class="anchor" id="line-629" /><span class="anchor" id="line-630" /><span class="anchor" id="line-631" /><span class="anchor" id="line-632" /></p><pre><span class="anchor" id="line-1-17" />...
<span class="anchor" id="line-2-10" />&lt;lst name="facet_counts"&gt;
<span class="anchor" id="line-3-9" />  &lt;lst name="facet_queries"/&gt;
<span class="anchor" id="line-4-9" />  &lt;lst name="facet_fields"/&gt;
<span class="anchor" id="line-5-9" />  &lt;lst name="facet_dates"/&gt;
<span class="anchor" id="line-6-8" />  &lt;lst name="facet_ranges"/&gt;
<span class="anchor" id="line-7-8" />  &lt;lst name="facet_intervals"&gt;
<span class="anchor" id="line-8-8" />    &lt;lst name="price"&gt;
<span class="anchor" id="line-9-8" />      &lt;int name="[0,10]"&gt;3&lt;/int&gt;
<span class="anchor" id="line-10-8" />      &lt;int name="(10,100]"&gt;4&lt;/int&gt;
<span class="anchor" id="line-11-8" />      &lt;int name="(100,*]"&gt;9&lt;/int&gt;
<span class="anchor" id="line-12-8" />    &lt;/lst&gt;
<span class="anchor" id="line-13-8" />  &lt;/lst&gt;
<span class="anchor" id="line-14-8" />&lt;/lst&gt;
<span class="anchor" id="line-15-8" />...</pre><span class="anchor" id="line-633" /><p class="line867">
</p><h3 id="Changing_the_key_per_interval">Changing the key per interval</h3>
<span class="anchor" id="line-634" /><p class="line867"><tt class="backtick">http://localhost:8983/solr/select?q=*:*&amp;facet=true&amp;facet.interval=price&amp;f.price.facet.interval.set={!key='cheap'}[0,10]&amp;f.price.facet.interval.set={!key='average'}%2810,100]&amp;f.price.facet.interval.set={!key='expensive'}%28100,*]</tt> <span class="anchor" id="line-635" /><span class="anchor" id="line-636" /></p><p class="line867"><span class="anchor" id="line-637" /><span class="anchor" id="line-638" /><span class="anchor" id="line-639" /><span class="anchor" id="line-640" /><span class="anchor" id="line-641" /><span class="anchor" id="line-642" /><span class="anchor" id="line-643" /><span class="anchor" id="line-644" /><span class="anchor" id="line-645" /><span class="anchor" id="line-646" /><span class="anchor" id="line-647" /><span class="anchor" id="line-648" /><span class="anchor" id="line-649" /><span class="anchor" id="line-650" /></p><pre><span class="anchor" id="line-1-18" />&lt;lst name="facet_counts"&gt;
<span class="anchor" id="line-2-11" />  &lt;lst name="facet_queries"/&gt;
<span class="anchor" id="line-3-10" />  &lt;lst name="facet_fields"/&gt;
<span class="anchor" id="line-4-10" />  &lt;lst name="facet_dates"/&gt;
<span class="anchor" id="line-5-10" />  &lt;lst name="facet_ranges"/&gt;
<span class="anchor" id="line-6-9" />  &lt;lst name="facet_intervals"&gt;
<span class="anchor" id="line-7-9" />    &lt;lst name="price"&gt;
<span class="anchor" id="line-8-9" />      &lt;int name="cheap"&gt;3&lt;/int&gt;
<span class="anchor" id="line-9-9" />      &lt;int name="average"&gt;4&lt;/int&gt;
<span class="anchor" id="line-10-9" />      &lt;int name="expensive"&gt;9&lt;/int&gt;
<span class="anchor" id="line-11-9" />    &lt;/lst&gt;
<span class="anchor" id="line-12-9" />  &lt;/lst&gt;
<span class="anchor" id="line-13-9" />&lt;/lst&gt;</pre><span class="anchor" id="line-651" /><span class="anchor" id="line-652" /><p class="line867">
</p><h1 id="Warming">Warming</h1>
<span class="anchor" id="line-653" /><p class="line874">facet.field queries using the term enumeration method can avoid the evaluation of some terms for greater efficiency. To force the evaluation of all terms for warming, the base query should match a single document. <span class="anchor" id="line-654" /><span class="anchor" id="bottom" /></p></div><p id="pageinfo" class="info" lang="en" dir="ltr">SimpleFacetParameters  (last edited 2015-04-25 19:33:00 by <span title="TomasFernandezLobbe @ 67.180.18.4[67.180.18.4]"><a class="nonexistent" href="/solr/TomasFernandezLobbe" title="TomasFernandezLobbe @ 67.180.18.4[67.180.18.4]">TomasFernandezLobbe</a></span>)</p>

<div id="pagebottom" />
</div>


<div id="footer">
<ul class="editbar"><li><span class="disabled">Immutable Page</span></li><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onclick="toggleComments();return false;">Comments</a></li><li><a class="nbinfo" href="/solr/SimpleFacetParameters?action=info" rel="nofollow">Info</a></li><li><a class="nbattachments" href="/solr/SimpleFacetParameters?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="/solr/SimpleFacetParameters">
<div>
    <label>More Actions:</label>
    <select name="action" onchange="if ((this.selectedIndex != 0) &amp;&amp;&#x0A;                      (this.options[this.selectedIndex].disabled == false)) {&#x0A;                this.form.submit();&#x0A;            }&#x0A;            this.selectedIndex = 0;">
        <option value="raw">Raw Text</option>
<option value="print">Print View</option>
<option value="RenderAsDocbook">Render as Docbook</option>
<option value="refresh">Delete Cache</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="SpellCheck">Check Spelling</option>
<option value="LikePages">Like Pages</option>
<option value="LocalSiteMap">Local Site Map</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="RenamePage" disabled="" class="disabled">Rename Page</option>
<option value="CopyPage">Copy Page</option>
<option value="DeletePage" disabled="" class="disabled">Delete Page</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="MyPages">My Pages</option>
<option value="show" disabled="" class="disabled">Subscribe User</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="show" disabled="" class="disabled">Remove Spam</option>
<option value="show" disabled="" class="disabled">Revert to this revision</option>
<option value="PackagePages">Package Pages</option>
<option value="SyncPages">Sync Pages</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="Load">Load</option>
<option value="Save">Save</option>
<option value="SlideShow">SlideShow</option>
    </select>
    <input type="submit" value="Do" />
    
</div>
<script type="text/javascript">
&lt;!--// Init menu
actionsMenuInit('More Actions:');
//--&gt;
</script>
</form>
</li></ul>

<ul id="credits">
<li><a href="http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>



</body></html>
