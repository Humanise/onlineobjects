<?xml version="1.0"?>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:o="http://onlineobjects.org/jsf"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:gui="http://humanise.dk/ui"
  xmlns:c="http://java.sun.com/jsp/jstl/core"
>

  <ui:composition template="templates/plain.xhtml">

    <ui:param name="tab" value="browse"/>

    <ui:define name="body">
      <c:set var="view" value="#{browseView}"/>

      <o:layout>
        <o:header>#{view.title}</o:header>
      <p>#{view.type}</p>
      <h2>Properties</h2>
      <table class="oo_table oo_table-bordered">
        <c:forEach var="prop" items="${view.properties}">
          <tr>
            <th>${prop.key}</th>
            <td>${prop.value}</td>
          </tr>
        </c:forEach>
      </table>
      <h2>Privileges</h2>
      <table class="oo_table oo_table-bordered">
        <thead>
          <th>Privileged</th>
          <th>View</th>
          <th>Alter</th>
          <th>Reference</th>
        </thead>
        <tbody>
        <c:forEach var="prop" items="${view.privileges}">
          <tr>
            <th>
              <c:if test="${prop.privileged != null}">
                ${prop.privileged.name}
              </c:if>
            </th>
            <td>${prop.view}</td>
            <td>${prop.alter}</td>
            <td>${prop.reference}</td>
          </tr>
        </c:forEach>
        </tbody>
      </table>

      <c:if test="#{not empty view.relationsFrom}">
        <h2>Relations from this to others</h2>
        <c:forEach items="#{view.relationsFrom}" var="rel">
          <p><o:link href="#{rel.entity.href}">#{rel.entity.name} (#{rel.entity.type})</o:link> [#{rel.kind}]</p>
        </c:forEach>
      </c:if>

      <c:if test="#{not empty view.relationsTo}">
        <h2>Relations from others to this</h2>
        <c:forEach items="#{view.relationsTo}" var="rel">
          <p><o:link href="#{rel.entity.href}">#{rel.entity.name} (#{rel.entity.type})</o:link> [#{rel.kind}]</p>
        </c:forEach>
      </c:if>
      <gui:diagram name="diagram"/>
      </o:layout>
      <o:dependency src="oo_table.css" from="core"/>
    </ui:define>


  </ui:composition>

</html>