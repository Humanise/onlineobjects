<?xml version="1.0"?>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:o="http://www.onlineobjects.com/jsf"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:gui="http://www.in2isoft.dk/in2igui"
  xmlns:c="http://java.sun.com/jsp/jstl/core"
>
  <ui:composition template="templates/plain.xhtml">

    <ui:define name="body">
      <o:box>
        <o:header>#{msg.account}</o:header>
        <p class="account_user oo_util_top"><strong class="account_user_label">#{msg.username}:</strong> #{accountSettingsView.user.username}</p>
        <p class="oo_util_top"><o:link href="/${accountSettingsView.language}/agreements">#{msg.agreements_title}</o:link><c:if test="${!accountSettingsView.hasAcceptedTerms}"> - TODO</c:if></p>

        <c:choose>
          <c:when test="#{accountSettingsView.allowed}">
            <div class="oo_util_top">
              <gui:formula name="mailForm">
                <gui:field label="#{msg.primary_email}">
                  <gui:textInput key="mail" value="#{accountSettingsView.primaryEmail}"/>
                </gui:field>
                <div class="oo_util_top">
                  <gui:button text="#{msg.change}" submit="true" variant="light"/>
                </div>
              </gui:formula>
            </div>
            <div class="oo_util_top-2">
              <gui:formula name="passwordForm">
                <gui:field label="#{msg.current_password}">
                  <gui:textInput key="currentPassword" secret="true"/>
                </gui:field>
                <gui:field label="#{msg.new_password}">
                  <gui:textInput key="newPassword" secret="true"/>
                </gui:field>
                <div class="oo_util_top">
                  <gui:button text="#{msg.change_password}" submit="true" variant="light"/>
                </div>
              </gui:formula>
            </div>
          </c:when>
          <c:otherwise>
            <p>Not allowed</p>
          </c:otherwise>
        </c:choose>
      </o:box>

      <o:dependency src="/WEB-INF/apps/account/web/js/account.js"/>
    </ui:define>

  </ui:composition>

</html>